# .env dev
#COMPOSE_FILE=docker-compose.yml:docker-compose.dev.yml

# .env.staging
# COMPOSE_FILE=docker-compose.yml:docker-compose.staging.yml

# .env.prod (production server)
#COMPOSE_FILE=docker-compose.yml:docker-compose.prod.yml

# Source Database (MySQL 5.7 - Production)
SOURCE_DB_HOST=127.0.0.1
SOURCE_DB_PORT=3306
SOURCE_DB_USER=cdc_user
SOURCE_DB_PASSWORD=change_this_password
SOURCE_DB_NAME=pos_production

# Target Database Type: mysql or postgres
TARGET_TYPE=mysql

# Target Database - MySQL 8 (used when TARGET_TYPE=mysql)
TARGET_DB_HOST=localhost  # or target server IP in production
TARGET_DB_PORT=3307       # Using different port for dev to avoid conflicts
TARGET_DB_USER=root
TARGET_DB_PASSWORD=change_this_password
TARGET_DB_NAME=pos_replica

# Target Database - PostgreSQL 16 (used when TARGET_TYPE=postgres)
TARGET_PG_HOST=localhost
TARGET_PG_PORT=5433
TARGET_PG_USER=cdc_writer
TARGET_PG_PASSWORD=change_this_password
TARGET_PG_DATABASE=pos_replica
TARGET_PG_SSLMODE=disable  # disable, require, verify-ca, verify-full

# Redpanda/Kafka Configuration
KAFKA_BROKERS=localhost:9092
KAFKA_GROUP_ID=cdc-consumer-group
KAFKA_AUTO_OFFSET_RESET=earliest  # Start from beginning on first run

# Debezium Configuration
DEBEZIUM_HOST=localhost
DEBEZIUM_PORT=8083

# Application Configuration
LOG_LEVEL=info              # debug, info, warn, error
LOG_FORMAT=json             # json or text
WORKER_COUNT=4              # Number of concurrent workers
BATCH_SIZE=100              # Events to process in batch
MAX_RETRIES=5               # Retry failed operations
RETRY_BACKOFF_MS=2000       # Initial backoff in milliseconds

# Excluded Tables (comma-separated)
EXCLUDED_TABLES=recorded_order,lock,log,versioninfo

# Monitoring
METRICS_PORT=9090           # Prometheus metrics endpoint
HEALTH_PORT=8080            # Health check endpoint
DEBEZIUM_SERVER_ID=118331

# Timezone Configuration
# Debezium sends datetime as epoch milliseconds treating source DB time as UTC.
# However, source DB stores local time without timezone info.
# These settings handle the conversion:
#   1. Interpret epoch values as SOURCE_DB_TIMEZONE wall-clock time
#   2. Convert to TARGET_DB_TIMEZONE for storage
#
# Example: Source stores "12:00" in Mountain Time, target needs Eastern Time
#   SOURCE_DB_TIMEZONE=America/Denver    (MT: UTC-7 winter, UTC-6 summer)
#   TARGET_DB_TIMEZONE=America/New_York  (ET: UTC-5 winter, UTC-4 summer)
#   Result: "12:00 MT" becomes "14:00 ET" (winter) or "14:00 ET" (summer)
SOURCE_DB_TIMEZONE=America/Denver
TARGET_DB_TIMEZONE=America/New_York



